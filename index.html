<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name = "viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<style>
textarea {
    width:390px;
    height:360px;
         }
a {
    text-decoration: none;
    border: 0.2px solid #000;
    color: #000;
    background: #e6e4e4;
    padding: 5px;
    border-radius: 1px;
  }
</style>
</head>

<body>
<textarea id="showresult"></textarea>
GBKï¼š<input type="file" id="opengbk"/>
<button onclick="copyText()">Copy</button>
<a id="save-btn" href="" download="noname.txt">Save1</a>

<script type="text/javascript">
function copyText() {
document.getElementById("showresult").select();
document.execCommand("copy");
}

function china(evt) {
 var files = evt.target.files,
    reader = new FileReader();
    reader.onload = function() {
     showout.value = this.result;
    };
    reader.readAsText(files[0], 'gbk');
}

var showout = document.getElementById("showresult");
opengbk.addEventListener("change", china, false);


var content,btn;

//content =document.querySelector("#content");

btn = document.getElementById("save-btn");
//btn.setAttribute( "href","data:text/ paint; utf-8," + showout.value);

showresult.addEventListener("change",function(){
var f = function(){
btn.setAttribute( "href","data:text/ paint; utf-8," + showresult.value);
}
return f(), f;

}()); 
  </script>  
</body>
</html>
